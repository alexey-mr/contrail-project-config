---

- hosts: localhost
  roles:
    - role: emit-job-header
      zuul_log_url: "{{ zuul_log_url }}"

- hosts: all
  roles:
    - acquire-ip-address
    - disable-os-unattended-upgrades
    - add-build-sshkey
    - validate-host
    - configure-hosts-entries
    - configure-mirrors-contrail
    - role: configure-maven-proxy
      maven_repo_mirror_url: 'http://{{ nexus.fqdn }}/repository/{{ nexus.repos.maven }}/'
    - prepare-workspace
    - gitlog-upload
